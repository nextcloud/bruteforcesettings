{"version":3,"file":"bruteforcesettings-node_modules_nextcloud_dialogs_dist_chunks_PublicAuthPrompt-uFWxS9Cy_mjs.js?v=123e2232c09f58019fcd","mappings":"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","sources":["webpack:///bruteforcesettings/node_modules/@nextcloud/vue/dist/chunks/NcTextField.vue_vue_type_script_setup_true_lang-Cv9c1EWI.mjs","webpack:///bruteforcesettings/node_modules/@nextcloud/dialogs/dist/chunks/PublicAuthPrompt-uFWxS9Cy.mjs"],"sourcesContent":["import { defineComponent, mergeModels, useModel, useTemplateRef, computed, createBlock, openBlock, unref, mergeProps, createSlots, withCtx, renderSlot } from \"vue\";\nimport { m as mdiArrowRight, a as mdiUndo, b as mdiClose } from \"./mdi-CpchYUUV.mjs\";\nimport { r as register, b as t50, c as t18, a as t } from \"./_l10n-BSFzy-71.mjs\";\nimport { N as NcIconSvgWrapper } from \"./NcIconSvgWrapper-BvLanNaW.mjs\";\nimport { N as NcInputField } from \"./NcInputField-tt_Gi9ja.mjs\";\nregister(t18, t50);\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"NcTextField\",\n  props: /* @__PURE__ */ mergeModels({\n    class: {},\n    inputClass: {},\n    id: {},\n    label: {},\n    labelOutside: { type: Boolean },\n    type: {},\n    placeholder: {},\n    showTrailingButton: { type: Boolean },\n    trailingButtonLabel: { default: void 0 },\n    success: { type: Boolean },\n    error: { type: Boolean },\n    helperText: {},\n    disabled: { type: Boolean },\n    pill: { type: Boolean },\n    trailingButtonIcon: { default: \"close\" }\n  }, {\n    \"modelValue\": { default: \"\" },\n    \"modelModifiers\": {}\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props, { expose: __expose }) {\n    const modelValue = useModel(__props, \"modelValue\");\n    const props = __props;\n    __expose({\n      focus,\n      select\n    });\n    const inputFieldInstance = useTemplateRef(\"inputField\");\n    const defaultTrailingButtonLabels = {\n      arrowEnd: t(\"Save changes\"),\n      close: t(\"Clear text\"),\n      undo: t(\"Undo changes\")\n    };\n    const NcInputFieldPropNames = new Set(Object.keys(NcInputField.props));\n    const propsToForward = computed(() => {\n      const sharedProps = Object.fromEntries(Object.entries(props).filter(([key]) => NcInputFieldPropNames.has(key)));\n      sharedProps.trailingButtonLabel ??= defaultTrailingButtonLabels[props.trailingButtonIcon];\n      return sharedProps;\n    });\n    function focus(options) {\n      inputFieldInstance.value.focus(options);\n    }\n    function select() {\n      inputFieldInstance.value.select();\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(NcInputField), mergeProps(propsToForward.value, {\n        ref: \"inputField\",\n        modelValue: modelValue.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => modelValue.value = $event)\n      }), createSlots({ _: 2 }, [\n        !!_ctx.$slots.icon ? {\n          name: \"icon\",\n          fn: withCtx(() => [\n            renderSlot(_ctx.$slots, \"icon\")\n          ]),\n          key: \"0\"\n        } : void 0,\n        _ctx.type !== \"search\" ? {\n          name: \"trailing-button-icon\",\n          fn: withCtx(() => [\n            _ctx.trailingButtonIcon === \"arrowEnd\" ? (openBlock(), createBlock(unref(NcIconSvgWrapper), {\n              key: 0,\n              directional: \"\",\n              path: unref(mdiArrowRight)\n            }, null, 8, [\"path\"])) : (openBlock(), createBlock(unref(NcIconSvgWrapper), {\n              key: 1,\n              path: _ctx.trailingButtonIcon === \"undo\" ? unref(mdiUndo) : unref(mdiClose)\n            }, null, 8, [\"path\"]))\n          ]),\n          key: \"1\"\n        } : void 0\n      ]), 1040, [\"modelValue\"]);\n    };\n  }\n});\nexport {\n  _sfc_main as _\n};\n//# sourceMappingURL=NcTextField.vue_vue_type_script_setup_true_lang-Cv9c1EWI.mjs.map\n","import { defineComponent, useTemplateRef, ref, watch, computed, createBlock, openBlock, unref, withCtx, createElementBlock, createCommentVNode, createVNode, toDisplayString } from \"vue\";\nimport { setGuestNickname } from \"@nextcloud/auth\";\nimport { getBuilder } from \"@nextcloud/browser-storage\";\nimport NcDialog from \"@nextcloud/vue/components/NcDialog\";\nimport NcNoteCard from \"@nextcloud/vue/components/NcNoteCard\";\nimport NcTextField from \"@nextcloud/vue/components/NcTextField\";\nimport { t, l as logger, s as showError } from \"./index-JpgrUA2Z.mjs\";\nimport { validateFilename, InvalidFilenameError, InvalidFilenameErrorReason } from \"@nextcloud/files\";\nimport { _ as _export_sfc } from \"./_plugin-vue_export-helper-1tPrXgE0.mjs\";\n/*!\n * SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\nfunction getGuestNameValidity(name) {\n  if (name.trim() === \"\") {\n    return t(\"Names must not be empty.\");\n  }\n  if (name.startsWith(\".\")) {\n    return t(\"Names must not start with a dot.\");\n  }\n  if (name.length > 64) {\n    return t(\"Names may be at most 64 characters long.\");\n  }\n  try {\n    validateFilename(name);\n    return \"\";\n  } catch (error) {\n    if (!(error instanceof InvalidFilenameError)) {\n      throw error;\n    }\n    switch (error.reason) {\n      case InvalidFilenameErrorReason.Character:\n        return t('\"{char}\" is not allowed inside a name.', { char: error.segment });\n      case InvalidFilenameErrorReason.ReservedName:\n        return t('\"{segment}\" is a reserved name and not allowed.', { segment: error.segment });\n      case InvalidFilenameErrorReason.Extension:\n        if (error.segment.match(/\\.[a-z]/i)) {\n          return t('\"{extension}\" is not an allowed name.', { extension: error.segment });\n        }\n        return t('Names must not end with \"{extension}\".', { extension: error.segment });\n      default:\n        return t(\"Invalid name.\");\n    }\n  }\n}\nconst _hoisted_1 = {\n  key: 0,\n  class: \"public-auth-prompt__text\"\n};\nconst _sfc_main = /* @__PURE__ */ defineComponent({\n  __name: \"PublicAuthPrompt\",\n  props: {\n    nickname: { default: \"\" },\n    title: { default: t(\"Guest identification\") },\n    text: { default: \"\" },\n    notice: { default: \"\" },\n    submitLabel: { default: t(\"Submit name\") },\n    cancellable: { type: Boolean }\n  },\n  emits: [\"close\"],\n  setup(__props, { emit: __emit }) {\n    const props = __props;\n    const emit = __emit;\n    const inputElement = useTemplateRef(\"input\");\n    const storage = getBuilder(\"public\").build();\n    const name = ref(props.nickname);\n    watch(() => props.nickname, () => {\n      name.value = props.nickname;\n    });\n    watch(name, (newName) => {\n      const validity = getGuestNameValidity(newName);\n      if (!validity && inputElement.value) {\n        setCustomValidity(validity);\n        return;\n      }\n    });\n    const buttons = computed(() => {\n      const cancelButton = {\n        label: t(\"Cancel\"),\n        variant: \"tertiary\",\n        callback: () => emit(\"close\")\n      };\n      const submitButton = {\n        label: props.submitLabel,\n        type: \"submit\",\n        variant: \"primary\"\n      };\n      if (props.cancellable) {\n        return [cancelButton, submitButton];\n      }\n      return [submitButton];\n    });\n    const defaultNotice = computed(() => {\n      if (props.notice) {\n        return props.notice;\n      }\n      if (name.value) {\n        return t(\"You are currently identified as {nickname}.\", { nickname: name.value });\n      }\n      return t(\"You are currently not identified.\");\n    });\n    function onSubmit() {\n      const nickname = name.value.trim();\n      const validity = getGuestNameValidity(nickname);\n      if (validity) {\n        setCustomValidity(validity);\n        return;\n      }\n      if (nickname === \"\") {\n        setCustomValidity(t(\"You cannot leave the name empty.\"));\n        return;\n      }\n      if (nickname.length < 2) {\n        setCustomValidity(t(\"Please enter a name with at least 2 characters.\"));\n        return;\n      }\n      try {\n        setGuestNickname(nickname);\n      } catch (error) {\n        logger.error(\"Failed to set nickname\", { error });\n        showError(t(\"Failed to set nickname.\"));\n        inputElement.value.focus();\n        return;\n      }\n      storage.setItem(\"public-auth-prompt-shown\", \"true\");\n      emit(\"close\", name.value);\n    }\n    function setCustomValidity(message) {\n      if (inputElement.value) {\n        inputElement.value.setCustomValidity(message);\n        inputElement.value.reportValidity();\n        inputElement.value.focus();\n      }\n    }\n    return (_ctx, _cache) => {\n      return openBlock(), createBlock(unref(NcDialog), {\n        buttons: buttons.value,\n        class: \"public-auth-prompt\",\n        \"data-cy-public-auth-prompt-dialog\": \"\",\n        \"is-form\": \"\",\n        \"no-close\": \"\",\n        name: __props.title,\n        onSubmit\n      }, {\n        default: withCtx(() => [\n          __props.text ? (openBlock(), createElementBlock(\"p\", _hoisted_1, toDisplayString(__props.text), 1)) : createCommentVNode(\"\", true),\n          createVNode(unref(NcNoteCard), {\n            class: \"public-auth-prompt__header\",\n            text: defaultNotice.value,\n            type: \"info\"\n          }, null, 8, [\"text\"]),\n          createVNode(unref(NcTextField), {\n            ref: \"input\",\n            modelValue: name.value,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => name.value = $event),\n            class: \"public-auth-prompt__input\",\n            \"data-cy-public-auth-prompt-dialog-name\": \"\",\n            label: unref(t)(\"Name\"),\n            placeholder: unref(t)(\"Enter your name\"),\n            required: !__props.cancellable,\n            minlength: \"2\",\n            maxlength: \"64\",\n            name: \"name\"\n          }, null, 8, [\"modelValue\", \"label\", \"placeholder\", \"required\"])\n        ]),\n        _: 1\n      }, 8, [\"buttons\", \"name\"]);\n    };\n  }\n});\nconst PublicAuthPrompt = /* @__PURE__ */ _export_sfc(_sfc_main, [[\"__scopeId\", \"data-v-065a07c1\"]]);\nexport {\n  PublicAuthPrompt as default\n};\n//# sourceMappingURL=PublicAuthPrompt-uFWxS9Cy.mjs.map\n"],"names":["r","_sfc_main","__name","props","class","inputClass","id","label","labelOutside","type","Boolean","placeholder","showTrailingButton","trailingButtonLabel","default","success","error","helperText","disabled","pill","trailingButtonIcon","emits","setup","__props","expose","__expose","modelValue","focus","options","inputFieldInstance","value","select","defaultTrailingButtonLabels","arrowEnd","close","undo","NcInputFieldPropNames","Set","Object","keys","N","propsToForward","sharedProps","fromEntries","entries","filter","key","has","_ctx","_cache","ref","$event","_","$slots","icon","name","fn","directional","path","m","getGuestNameValidity","trim","t","startsWith","length","reason","Character","char","segment","ReservedName","Extension","match","extension","_hoisted_1","nickname","title","text","notice","submitLabel","cancellable","emit","__emit","inputElement","storage","build","newName","validity","setCustomValidity","buttons","cancelButton","variant","callback","submitButton","defaultNotice","onSubmit","l","s","setItem","message","reportValidity","required","minlength","maxlength","PublicAuthPrompt"],"ignoreList":[],"sourceRoot":""}